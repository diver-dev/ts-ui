import{R as w,j as L,bm as at,u as nt,as as ut,ch as Rt,cq as Ut,ax as Lt,bc as Ot,cr as jt,cm as Pt,cs as Bt,br as Mt,au as Nt,cp as It,aX as Wt,aS as Ke,T as Ge,cn as Xe,B as qt,bE as Ht,d as $t}from"./index-BnH1FrvR.js";var de=e=>e.type==="checkbox",ne=e=>e instanceof Date,j=e=>e==null;const lt=e=>typeof e=="object";var T=e=>!j(e)&&!Array.isArray(e)&&lt(e)&&!ne(e),ot=e=>T(e)&&e.target?de(e.target)?e.target.checked:e.target.value:e,zt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ct=(e,s)=>e.has(zt(s)),Kt=e=>{const s=e.constructor&&e.constructor.prototype;return T(s)&&s.hasOwnProperty("isPrototypeOf")},Te=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function P(e){let s;const t=Array.isArray(e);if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(Te&&(e instanceof Blob||e instanceof FileList))&&(t||T(e)))if(s=t?[]:{},!t&&!Kt(e))s=e;else for(const i in e)e.hasOwnProperty(i)&&(s[i]=P(e[i]));else return e;return s}var ye=e=>Array.isArray(e)?e.filter(Boolean):[],D=e=>e===void 0,c=(e,s,t)=>{if(!s||!T(e))return t;const i=ye(s.split(/[,[\].]+?/)).reduce((u,n)=>j(u)?u:u[n],e);return D(i)||i===e?D(e[s])?t:e[s]:i},H=e=>typeof e=="boolean";const me={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},$={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},X={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ft=w.createContext(null),Re=()=>w.useContext(ft),Gt=e=>{const{children:s,...t}=e;return w.createElement(ft.Provider,{value:t},s)};var dt=(e,s,t,i=!0)=>{const u={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(u,n,{get:()=>{const f=n;return s._proxyFormState[f]!==$.all&&(s._proxyFormState[f]=!i||$.all),t&&(t[f]=!0),e[f]}});return u},M=e=>T(e)&&!Object.keys(e).length,yt=(e,s,t,i)=>{t(e);const{name:u,...n}=e;return M(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(f=>s[f]===(!i||$.all))},be=e=>Array.isArray(e)?e:[e],ht=(e,s,t)=>!e||!s||e===s||be(e).some(i=>i&&(t?i===s:i.startsWith(s)||s.startsWith(i)));function Ue(e){const s=w.useRef(e);s.current=e,w.useEffect(()=>{const t=!e.disabled&&s.current.subject&&s.current.subject.subscribe({next:s.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function Xt(e){const s=Re(),{control:t=s.control,disabled:i,name:u,exact:n}=e||{},[f,h]=w.useState(t._formState),_=w.useRef(!0),V=w.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),v=w.useRef(u);return v.current=u,Ue({disabled:i,next:b=>_.current&&ht(v.current,b.name,n)&&yt(b,V.current,t._updateFormState)&&h({...t._formState,...b}),subject:t._subjects.state}),w.useEffect(()=>(_.current=!0,V.current.isValid&&t._updateValid(!0),()=>{_.current=!1}),[t]),dt(f,t,V.current,!1)}var z=e=>typeof e=="string",gt=(e,s,t,i,u)=>z(e)?(i&&s.watch.add(e),c(t,e,u)):Array.isArray(e)?e.map(n=>(i&&s.watch.add(n),c(t,n))):(i&&(s.watchAll=!0),t);function Jt(e){const s=Re(),{control:t=s.control,name:i,defaultValue:u,disabled:n,exact:f}=e||{},h=w.useRef(i);h.current=i,Ue({disabled:n,subject:t._subjects.values,next:v=>{ht(h.current,v.name,f)&&V(P(gt(h.current,t._names,v.values||t._formValues,!1,u)))}});const[_,V]=w.useState(t._getWatch(i,u));return w.useEffect(()=>t._removeUnmounted()),_}var Le=e=>/^\w*$/.test(e),vt=e=>ye(e.replace(/["|']|\]/g,"").split(/\.|\[/)),A=(e,s,t)=>{let i=-1;const u=Le(s)?[s]:vt(s),n=u.length,f=n-1;for(;++i<n;){const h=u[i];let _=t;if(i!==f){const V=e[h];_=T(V)||Array.isArray(V)?V:isNaN(+u[i+1])?{}:[]}e[h]=_,e=e[h]}return e};function Qt(e){const s=Re(),{name:t,disabled:i,control:u=s.control,shouldUnregister:n}=e,f=ct(u._names.array,t),h=Jt({control:u,name:t,defaultValue:c(u._formValues,t,c(u._defaultValues,t,e.defaultValue)),exact:!0}),_=Xt({control:u,name:t}),V=w.useRef(u.register(t,{...e.rules,value:h,...H(e.disabled)?{disabled:e.disabled}:{}}));return w.useEffect(()=>{const v=u._options.shouldUnregister||n,b=(R,N)=>{const E=c(u._fields,R);E&&(E._f.mount=N)};if(b(t,!0),v){const R=P(c(u._options.defaultValues,t));A(u._defaultValues,t,R),D(c(u._formValues,t))&&A(u._formValues,t,R)}return()=>{(f?v&&!u._state.action:v)?u.unregister(t):b(t,!1)}},[t,u,f,n]),w.useEffect(()=>{c(u._fields,t)&&u._updateDisabledField({disabled:i,fields:u._fields,name:t,value:c(u._fields,t)._f.value})},[i,t,u]),{field:{name:t,value:h,...H(i)||_.disabled?{disabled:_.disabled||i}:{},onChange:w.useCallback(v=>V.current.onChange({target:{value:ot(v),name:t},type:me.CHANGE}),[t]),onBlur:w.useCallback(()=>V.current.onBlur({target:{value:c(u._formValues,t),name:t},type:me.BLUR}),[t,u]),ref:v=>{const b=c(u._fields,t);b&&v&&(b._f.ref={focus:()=>v.focus(),select:()=>v.select(),setCustomValidity:R=>v.setCustomValidity(R),reportValidity:()=>v.reportValidity()})}},formState:_,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(_.errors,t)},isDirty:{enumerable:!0,get:()=>!!c(_.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!c(_.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!c(_.validatingFields,t)},error:{enumerable:!0,get:()=>c(_.errors,t)}})}}const Yt=e=>e.render(Qt(e));var bt=(e,s,t,i,u)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:u||!0}}:{},Je=e=>({isOnSubmit:!e||e===$.onSubmit,isOnBlur:e===$.onBlur,isOnChange:e===$.onChange,isOnAll:e===$.all,isOnTouch:e===$.onTouched}),Qe=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const fe=(e,s,t,i)=>{for(const u of t||Object.keys(e)){const n=c(e,u);if(n){const{_f:f,...h}=n;if(f){if(f.refs&&f.refs[0]&&s(f.refs[0],u)&&!i)break;if(f.ref&&s(f.ref,f.name)&&!i)break;fe(h,s)}else T(h)&&fe(h,s)}}};var Zt=(e,s,t)=>{const i=ye(c(e,t));return A(i,"root",s[t]),A(e,t,i),e},Oe=e=>e.type==="file",Y=e=>typeof e=="function",Ve=e=>{if(!Te)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},_e=e=>z(e),je=e=>e.type==="radio",xe=e=>e instanceof RegExp;const Ye={value:!1,isValid:!1},Ze={value:!0,isValid:!0};var _t=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||e[0].value===""?Ze:{value:e[0].value,isValid:!0}:Ze:Ye}return Ye};const et={isValid:!1,value:null};var mt=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,et):et;function tt(e,s,t="validate"){if(_e(e)||Array.isArray(e)&&e.every(_e)||H(e)&&!e)return{type:t,message:_e(e)?e:"",ref:s}}var ae=e=>T(e)&&!xe(e)?e:{value:e,message:""},rt=async(e,s,t,i,u)=>{const{ref:n,refs:f,required:h,maxLength:_,minLength:V,min:v,max:b,pattern:R,validate:N,name:E,valueAsNumber:Z,mount:J,disabled:Q}=e._f,x=c(s,E);if(!J||Q)return{};const K=f?f[0]:n,G=m=>{i&&K.reportValidity&&(K.setCustomValidity(H(m)?"":m||""),K.reportValidity())},k={},re=je(n),he=de(n),ee=re||he,se=(Z||Oe(n))&&D(n.value)&&D(x)||Ve(n)&&n.value===""||x===""||Array.isArray(x)&&!x.length,I=bt.bind(null,E,t,k),ge=(m,F,p,O=X.maxLength,q=X.minLength)=>{const W=m?F:p;k[E]={type:m?O:q,message:W,ref:n,...I(m?O:q,W)}};if(u?!Array.isArray(x)||!x.length:h&&(!ee&&(se||j(x))||H(x)&&!x||he&&!_t(f).isValid||re&&!mt(f).isValid)){const{value:m,message:F}=_e(h)?{value:!!h,message:h}:ae(h);if(m&&(k[E]={type:X.required,message:F,ref:K,...I(X.required,F)},!t))return G(F),k}if(!se&&(!j(v)||!j(b))){let m,F;const p=ae(b),O=ae(v);if(!j(x)&&!isNaN(x)){const q=n.valueAsNumber||x&&+x;j(p.value)||(m=q>p.value),j(O.value)||(F=q<O.value)}else{const q=n.valueAsDate||new Date(x),W=oe=>new Date(new Date().toDateString()+" "+oe),ue=n.type=="time",le=n.type=="week";z(p.value)&&x&&(m=ue?W(x)>W(p.value):le?x>p.value:q>new Date(p.value)),z(O.value)&&x&&(F=ue?W(x)<W(O.value):le?x<O.value:q<new Date(O.value))}if((m||F)&&(ge(!!m,p.message,O.message,X.max,X.min),!t))return G(k[E].message),k}if((_||V)&&!se&&(z(x)||u&&Array.isArray(x))){const m=ae(_),F=ae(V),p=!j(m.value)&&x.length>+m.value,O=!j(F.value)&&x.length<+F.value;if((p||O)&&(ge(p,m.message,F.message),!t))return G(k[E].message),k}if(R&&!se&&z(x)){const{value:m,message:F}=ae(R);if(xe(m)&&!x.match(m)&&(k[E]={type:X.pattern,message:F,ref:n,...I(X.pattern,F)},!t))return G(F),k}if(N){if(Y(N)){const m=await N(x,s),F=tt(m,K);if(F&&(k[E]={...F,...I(X.validate,F.message)},!t))return G(F.message),k}else if(T(N)){let m={};for(const F in N){if(!M(m)&&!t)break;const p=tt(await N[F](x,s),K,F);p&&(m={...p,...I(F,p.message)},G(p.message),t&&(k[E]=m))}if(!M(m)&&(k[E]={ref:K,...m},!t))return k}}return G(!0),k};function er(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=D(e)?i++:e[s[i++]];return e}function tr(e){for(const s in e)if(e.hasOwnProperty(s)&&!D(e[s]))return!1;return!0}function C(e,s){const t=Array.isArray(s)?s:Le(s)?[s]:vt(s),i=t.length===1?e:er(e,t),u=t.length-1,n=t[u];return i&&delete i[n],u!==0&&(T(i)&&M(i)||Array.isArray(i)&&tr(i))&&C(e,t.slice(0,-1)),e}var ke=()=>{let e=[];return{get observers(){return e},next:u=>{for(const n of e)n.next&&n.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(n=>n!==u)}}),unsubscribe:()=>{e=[]}}},Fe=e=>j(e)||!lt(e);function te(e,s){if(Fe(e)||Fe(s))return e===s;if(ne(e)&&ne(s))return e.getTime()===s.getTime();const t=Object.keys(e),i=Object.keys(s);if(t.length!==i.length)return!1;for(const u of t){const n=e[u];if(!i.includes(u))return!1;if(u!=="ref"){const f=s[u];if(ne(n)&&ne(f)||T(n)&&T(f)||Array.isArray(n)&&Array.isArray(f)?!te(n,f):n!==f)return!1}}return!0}var Vt=e=>e.type==="select-multiple",rr=e=>je(e)||de(e),pe=e=>Ve(e)&&e.isConnected,xt=e=>{for(const s in e)if(Y(e[s]))return!0;return!1};function Ae(e,s={}){const t=Array.isArray(e);if(T(e)||t)for(const i in e)Array.isArray(e[i])||T(e[i])&&!xt(e[i])?(s[i]=Array.isArray(e[i])?[]:{},Ae(e[i],s[i])):j(e[i])||(s[i]=!0);return s}function Ft(e,s,t){const i=Array.isArray(e);if(T(e)||i)for(const u in e)Array.isArray(e[u])||T(e[u])&&!xt(e[u])?D(s)||Fe(t[u])?t[u]=Array.isArray(e[u])?Ae(e[u],[]):{...Ae(e[u])}:Ft(e[u],j(s)?{}:s[u],t[u]):t[u]=!te(e[u],s[u]);return t}var ve=(e,s)=>Ft(e,s,Ae(s)),At=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>D(e)?e:s?e===""?NaN:e&&+e:t&&z(e)?new Date(e):i?i(e):e;function Ce(e){const s=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):s.disabled))return Oe(s)?s.files:je(s)?mt(e.refs).value:Vt(s)?[...s.selectedOptions].map(({value:t})=>t):de(s)?_t(e.refs).value:At(D(s.value)?e.ref.value:s.value,e)}var sr=(e,s,t,i)=>{const u={};for(const n of e){const f=c(s,n);f&&A(u,n,f._f)}return{criteriaMode:t,names:[...e],fields:u,shouldUseNativeValidation:i}},ce=e=>D(e)?e:xe(e)?e.source:T(e)?xe(e.value)?e.value.source:e.value:e,ir=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function st(e,s,t){const i=c(e,t);if(i||Le(t))return{error:i,name:t};const u=t.split(".");for(;u.length;){const n=u.join("."),f=c(s,n),h=c(e,n);if(f&&!Array.isArray(f)&&t!==n)return{name:t};if(h&&h.type)return{name:n,error:h};u.pop()}return{name:t}}var ar=(e,s,t,i,u)=>u.isOnAll?!1:!t&&u.isOnTouch?!(s||e):(t?i.isOnBlur:u.isOnBlur)?!e:(t?i.isOnChange:u.isOnChange)?e:!0,nr=(e,s)=>!ye(c(e,s)).length&&C(e,s);const ur={mode:$.onSubmit,reValidateMode:$.onChange,shouldFocusError:!0};function lr(e={}){let s={...ur,...e},t={submitCount:0,isDirty:!1,isLoading:Y(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},u=T(s.defaultValues)||T(s.values)?P(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:P(u),f={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},_,V=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},b={values:ke(),array:ke(),state:ke()},R=Je(s.mode),N=Je(s.reValidateMode),E=s.criteriaMode===$.all,Z=r=>a=>{clearTimeout(V),V=setTimeout(r,a)},J=async r=>{if(v.isValid||r){const a=s.resolver?M((await ee()).errors):await I(i,!0);a!==t.isValid&&b.state.next({isValid:a})}},Q=(r,a)=>{(v.isValidating||v.validatingFields)&&((r||Array.from(h.mount)).forEach(l=>{l&&(a?A(t.validatingFields,l,a):C(t.validatingFields,l))}),b.state.next({validatingFields:t.validatingFields,isValidating:!M(t.validatingFields)}))},x=(r,a=[],l,y,d=!0,o=!0)=>{if(y&&l){if(f.action=!0,o&&Array.isArray(c(i,r))){const g=l(c(i,r),y.argA,y.argB);d&&A(i,r,g)}if(o&&Array.isArray(c(t.errors,r))){const g=l(c(t.errors,r),y.argA,y.argB);d&&A(t.errors,r,g),nr(t.errors,r)}if(v.touchedFields&&o&&Array.isArray(c(t.touchedFields,r))){const g=l(c(t.touchedFields,r),y.argA,y.argB);d&&A(t.touchedFields,r,g)}v.dirtyFields&&(t.dirtyFields=ve(u,n)),b.state.next({name:r,isDirty:m(r,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else A(n,r,a)},K=(r,a)=>{A(t.errors,r,a),b.state.next({errors:t.errors})},G=r=>{t.errors=r,b.state.next({errors:t.errors,isValid:!1})},k=(r,a,l,y)=>{const d=c(i,r);if(d){const o=c(n,r,D(l)?c(u,r):l);D(o)||y&&y.defaultChecked||a?A(n,r,a?o:Ce(d._f)):O(r,o),f.mount&&J()}},re=(r,a,l,y,d)=>{let o=!1,g=!1;const S={name:r},U=!!(c(i,r)&&c(i,r)._f.disabled);if(!l||y){v.isDirty&&(g=t.isDirty,t.isDirty=S.isDirty=m(),o=g!==S.isDirty);const B=U||te(c(u,r),a);g=!!(!U&&c(t.dirtyFields,r)),B||U?C(t.dirtyFields,r):A(t.dirtyFields,r,!0),S.dirtyFields=t.dirtyFields,o=o||v.dirtyFields&&g!==!B}if(l){const B=c(t.touchedFields,r);B||(A(t.touchedFields,r,l),S.touchedFields=t.touchedFields,o=o||v.touchedFields&&B!==l)}return o&&d&&b.state.next(S),o?S:{}},he=(r,a,l,y)=>{const d=c(t.errors,r),o=v.isValid&&H(a)&&t.isValid!==a;if(e.delayError&&l?(_=Z(()=>K(r,l)),_(e.delayError)):(clearTimeout(V),_=null,l?A(t.errors,r,l):C(t.errors,r)),(l?!te(d,l):d)||!M(y)||o){const g={...y,...o&&H(a)?{isValid:a}:{},errors:t.errors,name:r};t={...t,...g},b.state.next(g)}},ee=async r=>{Q(r,!0);const a=await s.resolver(n,s.context,sr(r||h.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return Q(r),a},se=async r=>{const{errors:a}=await ee(r);if(r)for(const l of r){const y=c(a,l);y?A(t.errors,l,y):C(t.errors,l)}else t.errors=a;return a},I=async(r,a,l={valid:!0})=>{for(const y in r){const d=r[y];if(d){const{_f:o,...g}=d;if(o){const S=h.array.has(o.name);Q([y],!0);const U=await rt(d,n,E,s.shouldUseNativeValidation&&!a,S);if(Q([y]),U[o.name]&&(l.valid=!1,a))break;!a&&(c(U,o.name)?S?Zt(t.errors,U,o.name):A(t.errors,o.name,U[o.name]):C(t.errors,o.name))}g&&await I(g,a,l)}}return l.valid},ge=()=>{for(const r of h.unMount){const a=c(i,r);a&&(a._f.refs?a._f.refs.every(l=>!pe(l)):!pe(a._f.ref))&&Se(r)}h.unMount=new Set},m=(r,a)=>(r&&a&&A(n,r,a),!te(Pe(),u)),F=(r,a,l)=>gt(r,h,{...f.mount?n:D(a)?u:z(r)?{[r]:a}:a},l,a),p=r=>ye(c(f.mount?n:u,r,e.shouldUnregister?c(u,r,[]):[])),O=(r,a,l={})=>{const y=c(i,r);let d=a;if(y){const o=y._f;o&&(!o.disabled&&A(n,r,At(a,o)),d=Ve(o.ref)&&j(a)?"":a,Vt(o.ref)?[...o.ref.options].forEach(g=>g.selected=d.includes(g.value)):o.refs?de(o.ref)?o.refs.length>1?o.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(d)?!!d.find(S=>S===g.value):d===g.value)):o.refs[0]&&(o.refs[0].checked=!!d):o.refs.forEach(g=>g.checked=g.value===d):Oe(o.ref)?o.ref.value="":(o.ref.value=d,o.ref.type||b.values.next({name:r,values:{...n}})))}(l.shouldDirty||l.shouldTouch)&&re(r,d,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&oe(r)},q=(r,a,l)=>{for(const y in a){const d=a[y],o=`${r}.${y}`,g=c(i,o);(h.array.has(r)||!Fe(d)||g&&!g._f)&&!ne(d)?q(o,d,l):O(o,d,l)}},W=(r,a,l={})=>{const y=c(i,r),d=h.array.has(r),o=P(a);A(n,r,o),d?(b.array.next({name:r,values:{...n}}),(v.isDirty||v.dirtyFields)&&l.shouldDirty&&b.state.next({name:r,dirtyFields:ve(u,n),isDirty:m(r,o)})):y&&!y._f&&!j(o)?q(r,o,l):O(r,o,l),Qe(r,h)&&b.state.next({...t}),b.values.next({name:f.mount?r:void 0,values:{...n}})},ue=async r=>{f.mount=!0;const a=r.target;let l=a.name,y=!0;const d=c(i,l),o=()=>a.type?Ce(d._f):ot(r),g=S=>{y=Number.isNaN(S)||S===c(n,l,S)};if(d){let S,U;const B=o(),ie=r.type===me.BLUR||r.type===me.FOCUS_OUT,pt=!ir(d._f)&&!s.resolver&&!c(t.errors,l)&&!d._f.deps||ar(ie,c(t.touchedFields,l),t.isSubmitted,N,R),De=Qe(l,h,ie);A(n,l,B),ie?(d._f.onBlur&&d._f.onBlur(r),_&&_(0)):d._f.onChange&&d._f.onChange(r);const Ee=re(l,B,ie,!1),Ct=!M(Ee)||De;if(!ie&&b.values.next({name:l,type:r.type,values:{...n}}),pt)return v.isValid&&J(),Ct&&b.state.next({name:l,...De?{}:Ee});if(!ie&&De&&b.state.next({...t}),s.resolver){const{errors:$e}=await ee([l]);if(g(B),y){const Tt=st(t.errors,i,l),ze=st($e,i,Tt.name||l);S=ze.error,l=ze.name,U=M($e)}}else Q([l],!0),S=(await rt(d,n,E,s.shouldUseNativeValidation))[l],Q([l]),g(B),y&&(S?U=!1:v.isValid&&(U=await I(i,!0)));y&&(d._f.deps&&oe(d._f.deps),he(l,U,S,Ee))}},le=(r,a)=>{if(c(t.errors,a)&&r.focus)return r.focus(),1},oe=async(r,a={})=>{let l,y;const d=be(r);if(s.resolver){const o=await se(D(r)?r:d);l=M(o),y=r?!d.some(g=>c(o,g)):l}else r?(y=(await Promise.all(d.map(async o=>{const g=c(i,o);return await I(g&&g._f?{[o]:g}:g)}))).every(Boolean),!(!y&&!t.isValid)&&J()):y=l=await I(i);return b.state.next({...!z(r)||v.isValid&&l!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:l}:{},errors:t.errors}),a.shouldFocus&&!y&&fe(i,le,r?d:h.mount),y},Pe=r=>{const a={...u,...f.mount?n:{}};return D(r)?a:z(r)?c(a,r):r.map(l=>c(a,l))},Be=(r,a)=>({invalid:!!c((a||t).errors,r),isDirty:!!c((a||t).dirtyFields,r),isTouched:!!c((a||t).touchedFields,r),isValidating:!!c((a||t).validatingFields,r),error:c((a||t).errors,r)}),wt=r=>{r&&be(r).forEach(a=>C(t.errors,a)),b.state.next({errors:r?t.errors:{}})},Me=(r,a,l)=>{const y=(c(i,r,{_f:{}})._f||{}).ref;A(t.errors,r,{...a,ref:y}),b.state.next({name:r,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&y&&y.focus&&y.focus()},Dt=(r,a)=>Y(r)?b.values.subscribe({next:l=>r(F(void 0,a),l)}):F(r,a,!0),Se=(r,a={})=>{for(const l of r?be(r):h.mount)h.mount.delete(l),h.array.delete(l),a.keepValue||(C(i,l),C(n,l)),!a.keepError&&C(t.errors,l),!a.keepDirty&&C(t.dirtyFields,l),!a.keepTouched&&C(t.touchedFields,l),!a.keepIsValidating&&C(t.validatingFields,l),!s.shouldUnregister&&!a.keepDefaultValue&&C(u,l);b.values.next({values:{...n}}),b.state.next({...t,...a.keepDirty?{isDirty:m()}:{}}),!a.keepIsValid&&J()},Ne=({disabled:r,name:a,field:l,fields:y,value:d})=>{if(H(r)){const o=r?void 0:D(d)?Ce(l?l._f:c(y,a)._f):d;A(n,a,o),re(a,o,!1,!1,!0)}},we=(r,a={})=>{let l=c(i,r);const y=H(a.disabled);return A(i,r,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:r}},name:r,mount:!0,...a}}),h.mount.add(r),l?Ne({field:l,disabled:a.disabled,name:r,value:a.value}):k(r,!0,a.value),{...y?{disabled:a.disabled}:{},...s.progressive?{required:!!a.required,min:ce(a.min),max:ce(a.max),minLength:ce(a.minLength),maxLength:ce(a.maxLength),pattern:ce(a.pattern)}:{},name:r,onChange:ue,onBlur:ue,ref:d=>{if(d){we(r,a),l=c(i,r);const o=D(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,g=rr(o),S=l._f.refs||[];if(g?S.find(U=>U===o):o===l._f.ref)return;A(i,r,{_f:{...l._f,...g?{refs:[...S.filter(pe),o,...Array.isArray(c(u,r))?[{}]:[]],ref:{type:o.type,name:r}}:{ref:o}}}),k(r,!1,void 0,o)}else l=c(i,r,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(ct(h.array,r)&&f.action)&&h.unMount.add(r)}}},Ie=()=>s.shouldFocusError&&fe(i,le,h.mount),Et=r=>{H(r)&&(b.state.next({disabled:r}),fe(i,(a,l)=>{let y=r;const d=c(i,l);d&&H(d._f.disabled)&&(y||(y=d._f.disabled)),a.disabled=y},0,!1))},We=(r,a)=>async l=>{let y;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let d=P(n);if(b.state.next({isSubmitting:!0}),s.resolver){const{errors:o,values:g}=await ee();t.errors=o,d=g}else await I(i);if(C(t.errors,"root"),M(t.errors)){b.state.next({errors:{}});try{await r(d,l)}catch(o){y=o}}else a&&await a({...t.errors},l),Ie(),setTimeout(Ie);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:M(t.errors)&&!y,submitCount:t.submitCount+1,errors:t.errors}),y)throw y},kt=(r,a={})=>{c(i,r)&&(D(a.defaultValue)?W(r,P(c(u,r))):(W(r,a.defaultValue),A(u,r,P(a.defaultValue))),a.keepTouched||C(t.touchedFields,r),a.keepDirty||(C(t.dirtyFields,r),t.isDirty=a.defaultValue?m(r,P(c(u,r))):m()),a.keepError||(C(t.errors,r),v.isValid&&J()),b.state.next({...t}))},qe=(r,a={})=>{const l=r?P(r):u,y=P(l),d=M(r),o=d?u:y;if(a.keepDefaultValues||(u=l),!a.keepValues){if(a.keepDirtyValues)for(const g of h.mount)c(t.dirtyFields,g)?A(o,g,c(n,g)):W(g,c(o,g));else{if(Te&&D(r))for(const g of h.mount){const S=c(i,g);if(S&&S._f){const U=Array.isArray(S._f.refs)?S._f.refs[0]:S._f.ref;if(Ve(U)){const B=U.closest("form");if(B){B.reset();break}}}}i={}}n=e.shouldUnregister?a.keepDefaultValues?P(u):{}:P(o),b.array.next({values:{...o}}),b.values.next({values:{...o}})}h={mount:a.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!v.isValid||!!a.keepIsValid||!!a.keepDirtyValues,f.watch=!!e.shouldUnregister,b.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:d?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!te(r,u)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:d?[]:a.keepDirtyValues?a.keepDefaultValues&&n?ve(u,n):t.dirtyFields:a.keepDefaultValues&&r?ve(u,r):{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},He=(r,a)=>qe(Y(r)?r(n):r,a);return{control:{register:we,unregister:Se,getFieldState:Be,handleSubmit:We,setError:Me,_executeSchema:ee,_getWatch:F,_getDirty:m,_updateValid:J,_removeUnmounted:ge,_updateFieldArray:x,_updateDisabledField:Ne,_getFieldArray:p,_reset:qe,_resetDefaultValues:()=>Y(s.defaultValues)&&s.defaultValues().then(r=>{He(r,s.resetOptions),b.state.next({isLoading:!1})}),_updateFormState:r=>{t={...t,...r}},_disableForm:Et,_subjects:b,_proxyFormState:v,_setErrors:G,get _fields(){return i},get _formValues(){return n},get _state(){return f},set _state(r){f=r},get _defaultValues(){return u},get _names(){return h},set _names(r){h=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:oe,register:we,handleSubmit:We,watch:Dt,setValue:W,getValues:Pe,reset:He,resetField:kt,clearErrors:wt,unregister:Se,setError:Me,setFocus:(r,a={})=>{const l=c(i,r),y=l&&l._f;if(y){const d=y.refs?y.refs[0]:y.ref;d.focus&&(d.focus(),a.shouldSelect&&d.select())}},getFieldState:Be}}function or(e={}){const s=w.useRef(),t=w.useRef(),[i,u]=w.useState({isDirty:!1,isValidating:!1,isLoading:Y(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Y(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...lr(e),formState:i});const n=s.current.control;return n._options=e,Ue({subject:n._subjects.state,next:f=>{yt(f,n._proxyFormState,n._updateFormState,!0)&&u({...n._formState})}}),w.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),w.useEffect(()=>{if(n._proxyFormState.isDirty){const f=n._getDirty();f!==i.isDirty&&n._subjects.state.next({isDirty:f})}},[n,i.isDirty]),w.useEffect(()=>{e.values&&!te(e.values,t.current)?(n._reset(e.values,n._options.resetOptions),t.current=e.values,u(f=>({...f}))):n._resetDefaultValues()},[e.values,n]),w.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),w.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),w.useEffect(()=>{e.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})},[e.shouldUnregister,n]),s.current.formState=dt(i,n),s.current}function cr({children:e,onSubmit:s,methods:t}){return L.jsx(Gt,{...t,children:L.jsx("form",{onSubmit:s,children:e})})}var it=function(e,s,t){if(e&&"reportValidity"in e){var i=c(t,s);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},St=function(e,s){var t=function(u){var n=s.fields[u];n&&n.ref&&"reportValidity"in n.ref?it(n.ref,u,e):n.refs&&n.refs.forEach(function(f){return it(f,u,e)})};for(var i in s.fields)t(i)},fr=function(e,s){s.shouldUseNativeValidation&&St(e,s);var t={};for(var i in e){var u=c(s.fields,i),n=Object.assign(e[i]||{},{ref:u&&u.ref});if(dr(s.names||Object.keys(e),i)){var f=Object.assign({},c(t,i));A(f,"root",n),A(t,i,f)}else A(t,i,n)}return t},dr=function(e,s){return e.some(function(t){return t.startsWith(s+".")})};function yr(e,s,t){return s===void 0&&(s={}),t===void 0&&(t={}),function(i,u,n){try{return Promise.resolve(function(f,h){try{var _=(s.context,Promise.resolve(e[t.mode==="sync"?"validateSync":"validate"](i,Object.assign({abortEarly:!1},s,{context:u}))).then(function(V){return n.shouldUseNativeValidation&&St({},n),{values:t.raw?i:V,errors:{}}}))}catch(V){return h(V)}return _&&_.then?_.then(void 0,h):_}(0,function(f){if(!f.inner)throw f;return{values:{},errors:fr((h=f,_=!n.shouldUseNativeValidation&&n.criteriaMode==="all",(h.inner||[]).reduce(function(V,v){if(V[v.path]||(V[v.path]={message:v.message,type:v.type}),_){var b=V[v.path].types,R=b&&b[v.type];V[v.path]=bt(v.path,_,V,v.type,R?[].concat(R,v.message):v.message)}return V},{})),n)};var h,_}))}catch(f){return Promise.reject(f)}}}function hr({verify:e,onSuccess:s,onError:t}){const{t:i}=at();nt(),ut();const u=Rt().shape({code:Ut().required(i("emailVerification.requiredCodeError")).min(6)}),n={code:""},f=or({mode:"all",resolver:yr(u),defaultValues:n}),{watch:h,control:_,setValue:V,handleSubmit:v,formState:{isSubmitting:b,errors:R}}=f;h();const N=async E=>{try{await e(`${E.code}`),s()}catch(Z){t(new Bt("verifycode",Z.message))}};return L.jsxs(cr,{methods:f,onSubmit:v(N),children:[L.jsx(Lt,{direction:"row",spacing:2,justifyContent:"center",children:L.jsx(Yt,{name:"code",control:_,render:({field:E,fieldState:{error:Z}})=>L.jsx(Ot,{...E,error:!!Z,autoFocus:!0,placeholder:"-",onChange:E.onChange,fullWidth:!0,inputProps:{className:"field-code",maxLength:6}})},"code")}),!!R.code&&L.jsxs(jt,{error:!!R.code,children:[i("emailVerification.requiredCodeError")," e.g. 123456"]}),L.jsx(Pt,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:b,sx:{mt:3},disabled:!!R.code,children:i("signup.verifyButton")})]})}const gr=$t.selectUserFromRegisterToken();function Vr(){const{t:e}=at(),s=nt(),{enqueueSnackbar:t}=ut(),{verifyRegisterCode:i}=Mt(),u=Nt(gr);return L.jsx(It,{children:L.jsx(Wt,{sx:{p:5},children:L.jsxs(Ke,{sx:{maxWidth:480,mx:"auto"},children:[L.jsx(Ge,{variant:"h3",paragraph:!0,children:"Please check your email!"}),L.jsxs(Ge,{sx:{color:"text.secondary"},children:["We have emailed a 6-digit confirmation code to ",L.jsx("strong",{children:u.email}),", please enter the code in below box to verify your email."]}),L.jsx(Ke,{sx:{mt:5,mb:3},children:L.jsx(hr,{verify:i,onSuccess:()=>{t("Verify success",{variant:"success"}),s(Xe.login)},onError:n=>{t(n.message,{variant:"error"})}})}),L.jsx(qt,{fullWidth:!0,component:Ht,to:Xe.register,sx:{mb:3},children:e("emailVerification.back")})]})})})}export{Vr as default};
